<div ng-controller="AppController as appCtrl">
  <!--  <div layout="row" style="background: #0097a7; height:15px;">
  </div> -->
  <div id="main-toolbar" layout="row">
    <md-toolbar class="md-whiteframe-z1">
      <div class="md-toolbar-tools">
        <div flex="" class="fill-height">
          <md-icon class="md md-menu md-2x white" ng-click="appCtrl.toggleList()" aria-label="Menu"></md-icon>
          <h2><span><img alt="Grockit" style="height: 44px;  margin-top: 16px;" src="assets/images/header-logo-beta.png" /></span></h2>
          <md-select ng-model="appCtrl.activeGroupId" aria-label="group">
            <md-select-label>{{$root.groupTitle}}</md-select-label>
            <md-option ng-repeat="linked in appCtrl.ugroups.linkedGroups track by $index" value="{{linked.id}}" ng-bind="linked.name" ng-click="appCtrl.groupRedirect(linked.id)">
            </md-option>
            <md-option ng-repeat="unlinked in appCtrl.ugroups.unLinkedGroups track by $index" value="{{unlinked.id}}" ng-click="appCtrl.groupRedirect(unlinked.id)" disable>
              <span ng-bind="unlinked.name"></span>
              <md-icon class="md md-1x md-lock-outline product-icon" aria-label="lock"></md-icon>
            </md-option>
          </md-select>
          <span flex=""></span>
          <md-icon ng-if="appCtrl.showBuyNow" class="md md-2x md-attach-money" ng-click="appCtrl.showPaymentBanner()"></md-icon>
          <label class="pointer" ng-click="appCtrl.displayMenu()">{{appCtrl.currentUser.firstName}}</label>
          <img class="md-fab md-primary round-img pointer" ng-src="{{::appCtrl.currentUser.avatarUrl}}" alt="User Picture" ng-click="appCtrl.displayMenu()" />
        </div>
      </div>
    </md-toolbar>
  </div>
  <div flex layout="row">
    <md-sidenav id="main-menu" md-component-id="left">
      <md-toolbar class="md-tall md-hue-2  menu-header">
        <span flex></span>
        <div layout="column" class="md-toolbar-tools-bottom inset">
          <md-icon class="menu-toggle md md-arrow-back md-2x white" ng-click="appCtrl.closeMainMenu()"></md-icon>
          <h2 class="md-toolbar-tools md-toolbar-tools-bottom menu-title">{{$root.groupTitle}} {{$root.currentPage}}</h2>
          <span></span>
        </div>
      </md-toolbar>
      <md-list>
        <md-list-item ng-repeat="item in appCtrl.menu" ng-if="item.isReady && item.canAccess && item.shouldShow" class="md-clickable">
          <a ng-href="{{item.url}}" target="{{item.target}}">
            <div class="md-list-item-inner">
              <div class="md-list-item-text" md-ink-ripple>
                <div class="inset">
                  <md-icon class="md md-2x {{item.icon}}"></md-icon>
                </div>
                <div class="inset">
                  {{item.title}}
                </div>
              </div>
            </div>
          </a>
        </md-list-item>
        <md-list-item ng-repeat="item in appCtrl.menu" ng-if="item.isReady && !item.canAccess && item.shouldShow" class="md-clickable">
          <a>
            <div class="md-list-item-inner">
              <div class="md-list-item-text" md-ink-ripple>
                <div class="inset">
                  <md-icon class="md md-2x {{item.icon}}" aria-label="{{item.title}}"></md-icon>
                </div>
                <div class="inset">
                  {{item.title}}
                  <i class="pull-right menu-icon fa fa-lock"></i>
                </div>
              </div>
            </div>
          </a>
        </md-list-item>
        <md-subheader class="management">Settings {{appCtrl.currentUser.firstName}}</md-subheader>
        <md-list-item>
          <a target="_blank"  ng-href="{{::appCtrl.url}}/users/{{::appCtrl.currentUser.userId}}/account">
            <div class="md-list-item-inner">
              <div class="md-list-item-text" md-ink-ripple>
                <div class="inset">
                  <md-icon class="md md-2x md-account-child " aria-label="Account"></md-icon>
                </div>
                <div class="inset">Account
                </div>
              </div>
            </div>
          </a>
        </md-list-item>
        <md-list-item>
          <a target="_blank" ng-href="{{::appCtrl.url}}/users/{{::appCtrl.currentUser.userId}}">
            <div class="md-list-item-inner">
              <div class="md-list-item-text" md-ink-ripple>
                <div class="inset">
                  <md-icon class="md md-2x md-perm-identity" aria-label="Profile"></md-icon>
                </div>
                <div class="inset">Profile
                </div>
              </div>
            </div>
          </a>
        </md-list-item>
        <md-list-item ng-controller="LogoutController as vmlogout">
          <a ng-click="vmlogout.logout()">
            <div class="md-list-item-inner">
              <div class="md-list-item-text" md-ink-ripple>
                <div class="inset">
                  <md-icon class="md md-2x md-settings-power" aria-label="Log Out"></md-icon>
                </div>
                <div class="inset">Log Out
                </div>
              </div>
            </div>
          </a>
        </md-list-item>
      </md-list>
    </md-sidenav>
    <md-content flex class="ui-view-container">
      <div data-ui-view="">
      </div>
    </md-content>
  </div>
</div>
